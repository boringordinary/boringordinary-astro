---
import { PricingCard, Section, Text } from "@/components";
import { toPlainText } from "@portabletext/react";
import { client } from "@/content";
import Layout from "@/layouts/Layout.astro";

const query = `
*[_type == "pricingPage"][0]{
  ...,
  pricing[]->{
    ...,
  },
  features[]->{
    ...,
    video {
      asset->
    }
  },
}
`;

const data = await client.fetch(query);
console.log(data.title, data?.description)
---

<Layout title="Pricing">
  <Section size="sm">
    <div class="max-w-screen-xl mx-auto">
      <div class="max-w-prose py-10 text-center flex flex-col gap-4 mx-auto">
        <h1 class="text-5xl font-bold leading-tight">
          {data.title}
        </h1>
        <p class="text-xl text-neutral-600">
          {toPlainText(data.description)}
        </p>
      </div>
    </div>
  </Section>

  <Section align="center">
    <div class="flex justify-center max-w-screen-md w-full">
      <PricingCard tiers={data.pricing} client:load />
    </div>
  </Section>

  <Section>
    <Text display>Need something more?</Text>

    <a href="https://savvycal.com/boringordinary/discovery">
      <div class="mx-auto w-full">
        <div class="mt-4">
          <div
            class="bg-zinc-900 text-white rounded-lg w-full p-6 text-center shadow-xl border-2 transition hover:border-violet-400 border-transparent duration-150"
          >
            <Text display size="md" gradient="primary">B+O Plus+</Text>
            <Text display size="xs">Pay what it's worth</Text>
          </div>
        </div>
      </div>
    </a>
  </Section>
</Layout>
